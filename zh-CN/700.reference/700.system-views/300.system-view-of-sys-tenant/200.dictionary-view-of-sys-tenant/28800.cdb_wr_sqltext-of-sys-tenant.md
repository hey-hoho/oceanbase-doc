|description||
|---|---|
|keywords||
|dir-name||
|dir-name-en||
|tenant-type||

# oceanbase.CDB_WR_SQLTEXT

<main id="notice" type='explain'>
<h4>说明</h4>
<p>该视图从 V4.2.2 版本开始引入。</p>
</main>

## 功能描述

视图 `CDB_WR_SQLTEXT` 用于展示所有租户 WR 采集的 SQL 文本。

## 字段说明

| **字段名称** | **类型**  | **是否可以为 NULL** | **描述**                               |
|------------|-------------|---------------------|----------------------------------------|
| TENANT_ID | bigint(20)  | NO   |  租户 ID      |
| SNAP_ID   | bigint(20)  | NO   |  快照 ID   |
| SQL_ID    | varchar(32) | NO   |  SQL 语句的 ID      |
| QUERY_SQL | longtext    | NO   |  SQL 文本      |
| SQL_TYPE  | bigint(20)  | NO   |  语句类型      |--待补充编号与语句类型的对应关系

## 查询示例

```sql
obclient [oceanbase]> SELECT * FROM oceanbase.CDB_WR_SQLTEXT LIMIT 1;
```

查询结果如下：

```shell
+-----------+---------+----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+----------+
| TENANT_ID | SNAP_ID | SQL_ID                           | QUERY_SQL                                                                                                                               | SQL_TYPE |
+-----------+---------+----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+----------+
|      1002 |       1 | 01058E374A5EF26873BA4D99C4A74582 | SELECT * FROM __all_type_history WHERE tenant_id = ? AND SCHEMA_VERSION <= ? ORDER BY tenant_id desc, type_id desc, schema_version desc |        1 |
+-----------+---------+----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------+----------+
1 row in set
```

## 相关视图或文档

[oceanbase.DBA_WR_SQLTEXT](28900.dba_wr_sqltext-of-sys-tenant.md)