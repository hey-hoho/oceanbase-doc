| Description   |                 |
|---------------|-----------------|
| keywords      |                 |
| dir-name      |                 |
| dir-name-en   |                 |
| tenant-type   |                 |

# SWITCHOVER

## 描述

该语句用于租户主备角色切换命令，可以将主租户无损切换为备租户，备租户切换成主租户。

## 语法

```sql
ALTER SYSTEM SWITCHOVER TO {STANDBY | PRIMARY} 
  [TENANT tenant_name] 
  [VERIFY];
```

<main id="notice" type='explain'>
  <h4>说明</h4>
  <p><ul><li>系统租户执行此命令时需指定 <code>TENANT tenant_name</code> 参数。</li><li>普通租户只能对本租户执行此命令。</li></ul></p>
</main>

## 语法说明

|   **字段**  | **说明** |
| ----------- | -------- |
| STANDBY     | 将主租户无损切换为备租户。|
| PRIMARY     | 将备租户切换成主租户。|
| tenant_name | 指定主/备租户名称。|
| VERIFY      | 可选项。当使用 `VERIFY` 命令时，表示验证 `SWITCHOVER` 命令是否可以执行成功。 <main id="notice" type='notice'><h4>注意</h4><p><code>VERIFY</code> 命令只是用来验证切换命令是否可以成功执行，而不会实际执行切换操作。</p></main> |

## 示例

对主租户执行主切备命令，将租户变为备租户 `tenant1`，并检查主租户已切换为备租户，`TENANT_ROLE` 变为 `STANDBY`，`SWITCHOVER_STATUS` 变为 `NORMAL`。

```shell
obclient> ALTER SYSTEM SWITCHOVER TO STANDBY TENANT tenant1;
Query OK, 0 rows affected

obclient> SELECT TENANT_NAME,TENANT_TYPE,TENANT_ROLE,SWITCHOVER_STATUS FROM DBA_OB_TENANTS
    WHERE TENANT_NAME='tenant1';
+---------------------+-------------+-------------+-------------------+
| TENANT_NAME         | TENANT_TYPE | TENANT_ROLE | SWITCHOVER_STATUS |
+---------------------+-------------+-------------+-------------------+
| t1                  | USER        | STANDBY     | NORMAL            |
+---------------------+-------------+-------------+-------------------+
1 row in set
```

## 相关文档

更多有关 `SWITCHOVER` 命令用法的信息，请参见 [Switchover](../../../../../600.manage/400.high-availability/300.physical-standby-database-disaster-recovery/600.role-switch/200.perform-switchover.md)。
